(this["webpackJsonpmy-network"]=this["webpackJsonpmy-network"]||[]).push([[0],{104:function(e,t){e.exports=function(e){return void 0===e||null===e||"object"===typeof e&&0===Object.keys(e).length||"string"===typeof e&&0===e.trim().length}},128:function(e,t,n){},158:function(e,t,n){},159:function(e,t,n){},160:function(e,t,n){"use strict";n.r(t);var r=n(1),a=n(0),s=n(15),o=n.n(s),c=(n(128),n(20)),i=n(21),l=n(97),u=n.n(l),d=n(8),p=n(9),j=n(11),h=n(10),f=n(18),b=n(22),m=n.n(b),O=n(59),g=function(e){e?m.a.defaults.headers.common.Authorization=e:delete m.a.defaults.headers.common.Authorization},x="https://my-network-api.herokuapp.com/",v={users:x+"users",login:x+"users/login",register:x+"users/register",follower:x+"users/follower",unfollower:x+"users/unfollower",following:x+"users/following",unfollowing:x+"users/unfollowing",posts:x+"posts"},w="CREATE_POST",y="DELETE_POST",k="GET_POST",C="UPDATE_POST_LIKES",U="ADD_COMMENT",I="GET_ERRORS",S="IND_NO_ERRORS",T="SET_CURR_USER",R="GET_FOLLOWERS",N="GET_FOLLOLWING",F="GET_ALL_USERS",_="GET_USER",L="UPDATE_FOLLOWERS",D="UPDATE_FOLLOWING",E=function(e){return{type:T,payload:e}},P=function(){return function(e){localStorage.removeItem("jwtToken"),g(!1),e(E({})),window.location.href="/login"}},A=n(24),M=n(35),W=n.n(M),G=n(216),B=n(201),H=n(5),z=function(e){Object(j.a)(n,e);var t=Object(h.a)(n);function n(){var e;return Object(d.a)(this,n),(e=t.call(this)).handleChange=function(t){e.setState(Object(A.a)({},t.target.name,t.target.value))},e.handleSubmit=function(t){t.preventDefault(),console.log("posted"),e.props.createpost(e.state.postText,e.props.user),e.setState({postText:""})},e.state={postText:""},e}return Object(p.a)(n,[{key:"render",value:function(){var e=this.state.postText,t=this.props.classes;return Object(r.jsxs)("form",{className:t.container,noValidate:!0,autoComplete:"off",onSubmit:this.handleSubmit,children:[Object(r.jsx)(G.a,{name:"postText",placeholder:"What's on your mind?",multiline:!0,className:t.textField,margin:"normal",rowsMax:"5",value:e,onChange:this.handleChange}),Object(r.jsx)(B.a,{variant:"contained",color:"primary",className:t.button,type:"submit",children:"Post"})]})}}]),n}(a.Component),q=W()(Object(H.a)((function(e){return{button:{margin:e.spacing.unit},container:{display:"flex",justifyContent:"center",marginTop:"16px"},textField:{marginLeft:e.spacing.unit,marginRight:e.spacing.unit,width:500}}})),Object(f.b)((function(e){return{user:e.authReducer.user}}),(function(e){return{createpost:function(t,n){return e(function(e,t){return function(n){m.a.post(v.posts,{text:e,author:t.name,authorId:t.userId}).then((function(e){return n({type:w,payload:e.data})}))}}(t,n))}}})))(z),J=n(7),V=n.n(J),K=n(17),Q=n(73),Y=n.n(Q),$=n(51),X=n(202),Z=Object(H.a)({progress:{left:"50%",position:"absolute",top:"50%",transform:"translate(-50%,-50%)"}})((function(e){var t=e.classes;return Object(r.jsx)("div",{className:t.progress,children:Object(r.jsx)(X.a,{className:t.l,size:50})})})),ee=function(e){return function(){var t=Object(K.a)(V.a.mark((function t(n){var r;return V.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,m.a.get("".concat(v.users,"/").concat(e));case 3:return r=t.sent,t.abrupt("return",n({type:_,payload:r.data}));case 7:return t.prev=7,t.t0=t.catch(0),t.abrupt("return",t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}()},te=function(e,t){return function(){var n=Object(K.a)(V.a.mark((function n(r){var a,s;return V.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,m.a.patch("".concat(v.following,"/").concat(e),{idToFollow:t});case 2:return a=n.sent,n.next=5,m.a.patch("".concat(v.follower,"/").concat(t),{followerId:e});case 5:return s=n.sent,r({type:L,payload:s.data}),n.abrupt("return",r({type:D,payload:a.data}));case 8:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()},ne=function(e,t){return function(){var n=Object(K.a)(V.a.mark((function n(r){var a,s;return V.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,m.a.patch("".concat(v.unfollowing,"/").concat(e),{idToUnfollow:t});case 2:return a=n.sent,n.next=5,m.a.patch("".concat(v.unfollower,"/").concat(t),{followerId:e});case 5:return s=n.sent,r({type:L,payload:s.data}),n.abrupt("return",r({type:D,payload:a.data}));case 8:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()},re=function(e){return function(){var t=Object(K.a)(V.a.mark((function t(n){var r;return V.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,m.a.get("".concat(v.users,"/").concat(e));case 2:return r=t.sent,t.abrupt("return",n({type:R,payload:r.data}));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},ae=function(e){return function(){var t=Object(K.a)(V.a.mark((function t(n){var r;return V.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,m.a.get("".concat(v.users,"/").concat(e));case 2:return r=t.sent,t.abrupt("return",n({type:N,payload:r.data}));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},se=n(204),oe=n(203),ce=n(206),ie=n(40),le=n(207),ue=n(217),de=n(208),pe=n(205),je=n(100),he=n.n(je),fe=n(101),be=n.n(fe),me=n(58),Oe=n.n(me),ge=n(99),xe=n.n(ge),ve=function(e){Object(j.a)(n,e);var t=Object(h.a)(n);function n(){var e;return Object(d.a)(this,n),(e=t.call(this)).handleChange=function(t){e.setState(Object(A.a)({},t.target.name,t.target.value))},e.componentDidMount=function(){var t=e.props,n=t.commenterId;(0,t.getUser)(n).then((function(t){e.setState({name:t.payload.user.name})}))},e.postComment=function(t){t.preventDefault(),""!==e.state.text.trim()&&(e.props.addComment(e.props.commenterId,e.props.postId,e.state.text),e.setState({text:""}))},e.state={text:"",name:""},e}return Object(p.a)(n,[{key:"render",value:function(){var e=this.props.classes;return Object(r.jsx)(oe.a,{className:e.CardHeader,title:Object(r.jsxs)("div",{className:e.cardHeaderTitle,children:[Object(r.jsx)(ue.a,{"aria-label":"recipe",className:e.avatar,children:this.state.name.charAt(0)}),Object(r.jsx)(G.a,{multiline:!0,placeholder:"Write a comment",className:e.commentField,onChange:this.handleChange,name:"text",value:this.state.text}),Object(r.jsx)(B.a,{variant:"contained",className:e.button,onClick:this.postComment,children:Object(r.jsx)(xe.a,{})})]})})}}]),n}(a.Component),we=Object(H.a)((function(e){return{button:{marginBottom:e.spacing.unit,marginLeft:e.spacing.unit},cardHeader:{paddingTop:e.spacing.unit,paddingBottom:e.spacing.unit},cardHeaderTitle:{display:"flex"},commentField:{width:"90%",marginLeft:e.spacing.unit,marginTop:e.spacing.unit}}}))(ve),ye=function(e){Object(j.a)(n,e);var t=Object(h.a)(n);function n(){var e;Object(d.a)(this,n);for(var r=arguments.length,a=new Array(r),s=0;s<r;s++)a[s]=arguments[s];return(e=t.call.apply(t,[this].concat(a))).state={name:""},e.componentDidMount=function(){var t=e.props,n=t.comment;(0,t.getUser)(n.commenterId).then((function(t){e.setState({name:t.payload.user.name})}))},e}return Object(p.a)(n,[{key:"render",value:function(){var e=this.props,t=e.classes,n=e.comment,a=this.state.name;return Object(r.jsx)(oe.a,{avatar:Object(r.jsx)(ue.a,{"aria-label":"recipe",className:t.avatar,children:a.charAt(0)}),title:Object(r.jsxs)("div",{className:t.commentContent,children:[Object(r.jsx)("div",{style:{display:"flex",justifyContent:"space-between"},children:Object(r.jsxs)("div",{style:{flexDirection:"column"},children:[Object(r.jsx)("div",{className:t.commenter,children:Object(r.jsx)(i.b,{className:t.link,to:"/login",children:a})}),Object(r.jsx)("div",{className:t.timestamp,children:$(n.createdAt).fromNow()})]})}),Object(r.jsx)("div",{className:t.commentText,children:n.text})]})})}}]),n}(a.Component),ke=Object(H.a)((function(e){return{cardHeader:{paddingTop:e.spacing.unit,paddingBottom:e.spacing.unit},commentContent:{backgroundColor:"#CFD8DC",borderRadius:"10px",padding:e.spacing.unit},commentText:{fontWeight:"400"},commenter:{fontWeight:"800"},link:{color:"#000",textDecoration:"none"},timestamp:{fontSize:"11px"}}}))(ye),Ce=function(e){Object(j.a)(n,e);var t=Object(h.a)(n);function n(){return Object(d.a)(this,n),t.apply(this,arguments)}return Object(p.a)(n,[{key:"render",value:function(){var e=this.props,t=e.addComment,n=e.commenterId,a=e.comments,s=e.postId,o=e.getUser;e.UserId;return Object(r.jsxs)("div",{children:[Object(r.jsx)("hr",{}),!!a.length&&a.map((function(e){return Object(r.jsx)(ke,{comment:e,getUser:o},e._id)})),Object(r.jsx)(we,{addComment:t,commenterId:n,postId:s,getUser:o})]})}}]),n}(a.Component),Ue=function(e){Object(j.a)(n,e);var t=Object(h.a)(n);function n(){var e;return Object(d.a)(this,n),(e=t.call(this)).componentDidMount=Object(K.a)(V.a.mark((function t(){var n,r,a;return V.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.props,r=n.post,a=n.getUser,t.next=3,a(r.authorId).then((function(t){t&&(console.log("cr",t),e.setState({email:t.payload.user.email}))}));case 3:case"end":return t.stop()}}),t)}))),e.handleOpenComment=function(){e.setState({openComments:!e.state.openComments})},e.state={email:"",openComments:!1},e}return Object(p.a)(n,[{key:"render",value:function(){var e=this,t=this.props,n=t.classes,a=t.post,s=t.userId,o=t.updatePostLikes,c=t.getUser,l=t.addComment,u=$(a.createdAt).fromNow();return Object(r.jsxs)(se.a,{className:n.card,children:[Object(r.jsx)(oe.a,{avatar:Object(r.jsx)(ue.a,{"aria-label":"recipe",className:n.avatar,src:"https://robohash.org/".concat(this.state.email)}),action:a.authorId===s?Object(r.jsx)(pe.a,{"aria-label":"settings",children:Object(r.jsx)(Oe.a,{color:"secondary",onClick:function(){return e.props.deletePost(a._id)}})}):null,title:Object(r.jsx)(i.b,{className:n.link,to:"/login",children:a.author}),subheader:u}),Object(r.jsx)(ce.a,{children:Object(r.jsx)(ie.a,{children:a.text})}),Object(r.jsxs)(le.a,{className:n.actions,disableActionSpacing:!0,children:[Object(r.jsxs)("div",{children:[Object(r.jsx)(pe.a,{"aria-label":"Like",onClick:function(){return a.likers.includes(s)?o("unlike",a._id,s):o("like",a._id,s)},children:Object(r.jsx)(he.a,{style:a.likers.includes(s)?{color:"#3f51b5"}:null})}),a.likesCount]}),Object(r.jsxs)("div",{style:{marginLeft:"20px"},children:[Object(r.jsx)(pe.a,{onClick:this.handleOpenComment,children:Object(r.jsx)(be.a,{})}),a.comments.length]})]}),Object(r.jsx)(de.a,{in:this.state.openComments,timeout:"auto",unmountOnExit:!0,children:Object(r.jsx)(Ce,{comments:a.comments,postId:a._id,commenterId:s,addComment:l,getUser:c})})]})}}]),n}(a.Component),Ie=Object(H.a)((function(e){return{actions:{display:"flex"},card:{margin:"20px auto",width:"70%"},link:{color:"#000",textDecoration:"none"}}}))(Ue),Se=function(e){Object(j.a)(n,e);var t=Object(h.a)(n);function n(){var e;return Object(d.a)(this,n),(e=t.call(this)).componentDidMount=Object(K.a)(V.a.mark((function t(){var n,r,a,s;return V.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.props,r=n.getPosts,a=n.getFollowing,!(s=n.user)){t.next=4;break}return t.next=4,r().then((function(){a(s.userId).then((function(t){var n=t.payload&&t.payload.user?t.payload.user.following:[];e.setState({following:n,loading:!1})}))}));case 4:case"end":return t.stop()}}),t)}))),e.state={posts:[],loading:!0},e}return Object(p.a)(n,[{key:"render",value:function(){var e=this,t=this.state,n=t.loading,a=t.following,s=this.props,o=s.user,c=s.getUser,i=s.updatePostLikes,l=s.addComment,u=s.deletePost;return n?Object(r.jsx)(Z,{}):Object(r.jsx)(r.Fragment,{children:this.props.posts.map((function(t){return!e.props.showMyPosts&&a.includes(t.authorId)||t.authorId===o.userId?Object(r.jsx)(Ie,{post:t,userId:o.userId,getUser:function(e){return c(e)},updatePostLikes:function(e,t,n){return i(e,t,n)},addComment:l,deletePost:u}):null}))})}}]),n}(a.Component),Te=Object(f.b)((function(e){return{user:e.authReducer.user,posts:e.postReducer.posts}}),(function(e){return{deletePost:function(t){return e(function(e){return function(t){return m.a.delete("".concat(v.posts,"/").concat(e)).then((function(n){return t({type:y,id:e})}))}}(t))},getPosts:function(){return e((function(e){return m.a.get(v.posts).then((function(t){return e({type:k,payload:t.data})}))}))},getUser:function(t){return e(ee(t))},getFollowing:function(t){return e(ae(t))},updatePostLikes:function(t,n,r){return e(function(e,t,n){return function(r){return m.a.patch("".concat(v.posts,"/").concat(t),{action:e,id:n}).then((function(e){return r({type:C,payload:e.data})}))}}(t,n,r))},addComment:function(t,n,r){return e(function(e,t,n){return function(r){return m.a.patch("".concat(v.posts,"/").concat(t),{action:"addComment",commenterId:e,text:n}).then((function(t){return r({type:U,payload:t.data,commenterId:e,text:n})}))}}(t,n,r))}}}))(Se),Re=n(29),Ne=n(210),Fe=n(211),_e=n(105),Le=n(209),De=function(e){Object(j.a)(n,e);var t=Object(h.a)(n);function n(){var e;Object(d.a)(this,n);for(var r=arguments.length,a=new Array(r),s=0;s<r;s++)a[s]=arguments[s];return(e=t.call.apply(t,[this].concat(a))).state={anchorEl:null},e.handleClick=function(t){e.setState({anchorEl:t.currentTarget})},e.handleClose=function(){e.setState({anchorEl:null})},e}return Object(p.a)(n,[{key:"render",value:function(){var e=this.props,t=e.classes,n=e.logoutUser,a=e.user,s=this.state.anchorEl;return Object(r.jsxs)("div",{children:[Object(r.jsxs)(B.a,{"aria-owns":s?"right-menu":null,"aria-haspopup":"true",className:t.menuButton,onClick:this.handleClick,children:[Object(r.jsx)(ue.a,{alt:"Remy Sharp",className:t.avatar,src:"https://robohash.org/".concat(a.email)}),Object(r.jsx)("h5",{style:{padding:"6px 0 0 5px"},children:a.name})]}),Object(r.jsxs)(_e.a,{id:"right-menu",anchorEl:s,open:Boolean(s),onClose:this.handleClose,children:[Object(r.jsx)("a",{className:t.link,href:"/",children:Object(r.jsx)(Le.a,{onClick:this.handleClose,children:"Home"})}),Object(r.jsx)("a",{className:t.link,href:"/profile/".concat(a.userId),children:Object(r.jsx)(Le.a,{onClick:this.handleClose,children:"Profile"})}),Object(r.jsx)("a",{className:t.link,href:"/discover",children:Object(r.jsx)(Le.a,{onClick:this.handleClose,children:"Discover"})}),Object(r.jsx)(Le.a,{onClick:function(){return n()},children:"Logout"})]})]})}}]),n}(a.Component),Ee=Object(H.a)({link:{outline:"none",textDecoration:"none",color:"black"},menuButton:{color:"#fff",fontSize:"18px",marginRight:"-15px",textTransform:"none"}})(De),Pe=function(e){Object(j.a)(n,e);var t=Object(h.a)(n);function n(){return Object(d.a)(this,n),t.apply(this,arguments)}return Object(p.a)(n,[{key:"render",value:function(){var e=this.props,t=e.classes,n=e.user,a=e.logout;return Object(r.jsx)("div",{className:t.root,children:Object(r.jsx)(Ne.a,{position:"static",children:Object(r.jsxs)(Fe.a,{children:[Object(r.jsx)(ie.a,{className:t.flex,variant:"title",color:"inherit",children:Object(r.jsx)("a",{className:t.logo,href:"/",children:"My Network"})}),Object(r.jsx)("div",{children:Object(r.jsx)(Ee,{logoutUser:a,user:n})})]})})})}}]),n}(a.Component),Ae=Object(Re.compose)(Object(H.a)({flex:{flexGrow:1},logo:{color:"#fff",textDecoration:"none"},menuButton:{marginLeft:-12,marginRight:20},root:{flexGrow:1}}),Object(f.b)((function(e){return{user:e.authReducer.user}}),(function(e){return{logout:function(){return e(P())}}})))(Pe),Me=function(e){Object(j.a)(n,e);var t=Object(h.a)(n);function n(){var e;Object(d.a)(this,n);for(var r=arguments.length,a=new Array(r),s=0;s<r;s++)a[s]=arguments[s];return(e=t.call.apply(t,[this].concat(a))).componentDidMount=function(){localStorage.jwtToken||e.props.history.push("/login")},e}return Object(p.a)(n,[{key:"render",value:function(){return Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)(Ae,{}),Object(r.jsx)(q,{}),Object(r.jsx)(Te,{})]})}}]),n}(a.Component),We=Object(f.b)((function(e){return{logout:function(){return e(P())}}}))(Me),Ge=(n(96),function(e){Object(j.a)(n,e);var t=Object(h.a)(n);function n(){var e;return Object(d.a)(this,n),(e=t.call(this)).handleChange=function(t){var n;e.setState((n={},Object(A.a)(n,t.target.name,t.target.value),Object(A.a)(n,"errors",{}),Object(A.a)(n,"success",!1),n))},e.handleSubmit=function(){var t=Object(K.a)(V.a.mark((function t(n){var r,a,s,o,c;return V.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n.preventDefault(),r=e.state,a=r.name,s=r.email,o=r.password,c=r.confirmPassword,o===c){t.next=6;break}return"Passwords do not match.",e.setState({password:"",confirmPassword:"",errors:{message:"Passwords do not match."}}),t.abrupt("return");case 6:e.props.createUser({name:a,email:s,password:o});case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.state={name:"",email:"",password:"",confirmPassword:"",errors:{},registered:!1,success:!1},e}return Object(p.a)(n,[{key:"componentWillReceiveProps",value:function(e){if(e.error.success&&this.setState({success:!0}),e.error){var t=e.error.error;this.setState({errors:{message:t}})}}},{key:"render",value:function(){var e=this.state,t=e.errors,n=e.name,a=e.email,s=e.password,o=e.confirmPassword,c=e.success,l=e.loading;return Object(r.jsx)("div",{class:"container",children:Object(r.jsx)("section",{id:"content",children:Object(r.jsxs)("form",{onSubmit:this.handleSubmit,autoComplete:"off",children:[Object(r.jsx)("h1",{children:"Create a new account"}),t.message&&Object(r.jsx)("p",{style:{textAlign:"left",marginLeft:"10%",border:"2px solid red",padding:"4px",maxWidth:"290px"},children:t.message}),c&&Object(r.jsxs)("p",{style:{textAlign:"left",marginLeft:"10%",border:"2px solid green",padding:"4px",maxWidth:"290px"},children:["You have been registered successfully.",Object(r.jsx)(i.c,{to:"/login",children:"CLick Here"})," to login."]}),Object(r.jsx)("div",{children:Object(r.jsx)("input",{type:"text",placeholder:"name",name:"name",value:n,onChange:this.handleChange,required:!0})}),Object(r.jsx)("div",{children:Object(r.jsx)("input",{type:"email",placeholder:"Email",name:"email",value:a,onChange:this.handleChange,autocomplete:"off",required:!0})}),Object(r.jsx)("div",{children:Object(r.jsx)("input",{type:"password",placeholder:"Password",name:"password",value:s,onChange:this.handleChange,required:!0})}),Object(r.jsx)("div",{children:Object(r.jsx)("input",{type:"password",placeholder:"Confirm Password",name:"confirmPassword",value:o,onChange:this.handleChange,required:!0})}),Object(r.jsxs)("div",{children:[Object(r.jsx)("input",{type:"submit",value:"Register",disabled:l||c}),Object(r.jsx)(i.c,{to:"/login",children:"Log In"})]})]})})})}}]),n}(a.Component)),Be=Object(f.b)((function(e){return{auth:e.authReducer,error:e.errorReducer}}),(function(e){return{createUser:function(t){return e(function(e){return function(t){m.a.post(v.register,e).then((function(e){t({type:S,payload:{success:!0}})})).catch((function(e){t({type:I,payload:e.response.data})}))}}(t))}}}))(Ge),He=function(e){Object(j.a)(n,e);var t=Object(h.a)(n);function n(){var e;return Object(d.a)(this,n),(e=t.call(this)).componentWillReceiveProps=function(t){if(t.auth.isAuthenticated&&e.props.history.push("/"),t.error){var n=t.error.message;e.setState({errors:{message:n}})}},e.componentDidMount=function(){e.props.auth.isAuthenticated&&e.props.history.push("/")},e.handleChange=function(t){var n;e.setState((n={},Object(A.a)(n,t.target.name,t.target.value),Object(A.a)(n,"errors",{}),n))},e.handleSubmit=function(t){console.log("submitted"),t.preventDefault();var n=e.state,r={email:n.email,password:n.password};e.props.signIn(r)},e.state={email:"",password:"",errors:{}},e}return Object(p.a)(n,[{key:"render",value:function(){var e=this.state,t=e.errors,n=e.email,a=e.password;return Object(r.jsx)("div",{class:"container",children:Object(r.jsx)("section",{id:"content",children:Object(r.jsxs)("form",{onSubmit:this.handleSubmit,children:[Object(r.jsx)("h1",{children:"Login to your account"}),t.message&&Object(r.jsx)("p",{style:{textAlign:"left",marginLeft:"10%",border:"2px solid red",padding:"4px",maxWidth:"290px"},children:t.message}),Object(r.jsx)("div",{children:Object(r.jsx)("input",{type:"email",placeholder:"Email",name:"email",value:n,onChange:this.handleChange})}),Object(r.jsx)("div",{children:Object(r.jsx)("input",{type:"password",placeholder:"Password",name:"password",value:a,onChange:this.handleChange})}),Object(r.jsxs)("div",{children:[Object(r.jsx)("input",{type:"submit",value:"Log In"}),Object(r.jsx)(i.c,{to:"/register",children:"Register"})]})]})})})}}]),n}(a.Component),ze=Object(f.b)((function(e){return{auth:e.authReducer,error:e.errorReducer}}),(function(e){return{signIn:function(t){return e(function(e){return function(t){m.a.post(v.login,e).then((function(e){var n=e.data.token;localStorage.setItem("jwtToken",n),g(n);var r=Object(O.a)(n);t(E(r))})).catch((function(e){t({type:I,payload:e.response.data})}))}}(t))}}}))(He),qe=n(212),Je=(n(158),function(e){Object(j.a)(n,e);var t=Object(h.a)(n);function n(){var e;Object(d.a)(this,n);for(var r=arguments.length,a=new Array(r),s=0;s<r;s++)a[s]=arguments[s];return(e=t.call.apply(t,[this].concat(a))).state={name:""},e}return Object(p.a)(n,[{key:"render",value:function(){var e=this,t=this.props.user,n="https://robohash.org/".concat(t.email);return Object(r.jsxs)("div",{class:"center",children:[Object(r.jsxs)("div",{class:"profile",children:[Object(r.jsx)("div",{class:"image",children:Object(r.jsx)("img",{src:n,width:"70",height:"70",alt:"ava"})}),Object(r.jsx)("div",{class:"name",children:t.name}),Object(r.jsxs)("div",{class:"actions",children:[Object(r.jsx)(i.b,{to:"/profile/".concat(t._id),children:Object(r.jsx)("button",{class:"btn",children:"View"})}),Object(r.jsx)("button",{class:"btn",onClick:function(){return e.props.followUser(e.props.currUserId,t._id)},children:"Follow"})]})]}),Object(r.jsxs)("div",{class:"stats",children:[Object(r.jsxs)("div",{class:"box",children:[Object(r.jsx)("span",{class:"value",children:t.followers.length}),Object(r.jsx)("span",{class:"parameter",children:"Followers"})]}),Object(r.jsxs)("div",{class:"box",children:[Object(r.jsx)("span",{class:"value",children:t.following.length}),Object(r.jsx)("span",{class:"parameter",children:"Following"})]})]})]})}}]),n}(a.Component)),Ve=function(e){Object(j.a)(n,e);var t=Object(h.a)(n);function n(){var e;return Object(d.a)(this,n),(e=t.call(this)).componentDidMount=Object(K.a)(V.a.mark((function t(){return V.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.props.getAllUsers();case 2:e.setState({loading:!1});case 3:case"end":return t.stop()}}),t)}))),e.state={loading:!0,following:[]},e}return Object(p.a)(n,[{key:"render",value:function(){var e=this,t=this.props,n=t.userReducer,a=t.classes,s=t.authReducer;return this.state.loading?Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)(Z,{}),Object(r.jsx)(Ae,{})]}):Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)(Ae,{}),Object(r.jsx)("div",{className:Y()(a.layout,a.cardGrid),children:Object(r.jsx)(qe.a,{container:!0,justify:"center",children:n.allUsers.map((function(t){return t._id===s.user.userId||t.followers.includes(s.user.userId)?null:Object(r.jsx)(qe.a,{item:!0,children:Object(r.jsx)(Je,{followUser:e.props.followUser,user:t,currUserId:s.user.userId})},t._id)}))})})]})}}]),n}(a.Component),Ke=W()(Object(H.a)((function(e){return{cardGrid:{padding:"".concat(4*e.spacing.unit,"px 0")},layout:Object(A.a)({width:"auto"},e.breakpoints.up("sm"),{marginLeft:3*e.spacing.unit,marginRight:3*e.spacing.unit})}})),Object(f.b)((function(e){return{authReducer:e.authReducer,userReducer:e.userReducer}}),(function(e){return{followUser:function(t,n){return e(te(t,n))},getAllUsers:function(){return e(function(){var e=Object(K.a)(V.a.mark((function e(t){var n;return V.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.a.get(v.users);case 2:return n=e.sent,e.abrupt("return",t({type:F,payload:n.data}));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}}})))(Ve),Qe=(n(159),function(e){Object(j.a)(n,e);var t=Object(h.a)(n);function n(){var e;return Object(d.a)(this,n),(e=t.call(this)).componentDidMount=Object(K.a)(V.a.mark((function t(){var n,r,a;return V.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(localStorage.jwtToken){t.next=2;break}return t.abrupt("return",e.props.history.push("/login"));case 2:n=e.props,r=n.getUser,a=n.match,r(a.params.id).then((function(t){e.setState({pageUser:t.payload.user,loading:!1})}));case 4:case"end":return t.stop()}}),t)}))),e.handleFollow=function(){var t=Object(K.a)(V.a.mark((function t(n){var r,a,s,o,c;return V.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=e.props,a=r.signedInUser,s=r.followUser,o=r.unFollowUser,c=r.match,!n){t.next=6;break}return t.next=4,o(a.userId,c.params.id);case 4:t.next=8;break;case 6:return t.next=8,s(a.userId,c.params.id);case 8:return t.next=10,e.props.getUser(c.params.id).then((function(t){e.setState({pageUser:t.payload.user})}));case 10:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.goToFollowing=function(){e.props.history.push("/followings")},e.goToFollowers=function(){e.props.history.push("/followers")},e.state={name:"",loading:!0,pageUser:{}},e}return Object(p.a)(n,[{key:"render",value:function(){var e=this,t=this.state,n=t.loading,a=t.pageUser,s=this.props,o=s.signedInUser,c=s.match,i=this.props.posts.filter((function(e){return e.authorId===c.params.id})).length;return n?Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)(Z,{}),Object(r.jsx)(Ae,{})]}):Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)(Ae,{}),Object(r.jsx)("div",{style:{width:"100%",height:"auto"},children:Object(r.jsxs)("div",{class:"bg-white shadow rounded overflow-hidden",children:[Object(r.jsxs)("div",{class:"px-4 pt-0 pb-4 cover",children:[Object(r.jsxs)("div",{class:"media align-items-end profile-head mb-2",children:[Object(r.jsxs)("div",{class:"profile mr-3",children:[Object(r.jsx)("img",{src:"https://robohash.org/".concat(a.email),alt:"...",width:"130",class:"rounded mb-2 img-thumbnail"}),o.userId!==c.params.id&&Object(r.jsx)("button",{onClick:function(){return e.handleFollow(a.followers.includes(o.userId))},class:"btn btn-outline-dark btn-sm btn-block",style:{color:"white"},children:a.followers.includes(o.userId)?"Unfollow":"Follow"})]}),Object(r.jsxs)("div",{class:"media-body mb-5 text-white",children:[Object(r.jsx)("h4",{class:"mt-0 mb-0",children:a.name}),Object(r.jsxs)("p",{class:"small mb-4",children:[" ",Object(r.jsx)("i",{class:"fas fa-map-marker-alt "}),a.email]})]})]}),Object(r.jsx)("hr",{style:{background:"white",width:"45%",marginRight:"0"}}),Object(r.jsx)("div",{class:"d-flex justify-content-end text-center",children:Object(r.jsxs)("ul",{class:"list-inline",style:{color:"white"},children:[Object(r.jsxs)("li",{class:"list-inline-item mr-4",children:[Object(r.jsx)("h2",{class:"font-weight-bold d-block",children:i}),Object(r.jsxs)("small",{class:"text-muted",children:[" ",Object(r.jsx)("i",{class:"fas fa-image "}),"Posts"]})]}),Object(r.jsxs)("li",{class:"list-inline-item mr-4 white",onClick:o.userId===c.params.id?this.goToFollowers:null,style:{cursor:o.userId===c.params.id?"pointer":""},children:[Object(r.jsx)("h2",{class:"font-weight-bold d-block",children:a.followers.length}),Object(r.jsxs)("small",{class:"text-muted",children:[" ",Object(r.jsx)("i",{class:"fas fa-user "}),"Followers"]})]}),Object(r.jsxs)("li",{class:"list-inline-item white",onClick:o.userId===c.params.id?this.goToFollowing:null,style:{cursor:o.userId===c.params.id?"pointer":""},children:[Object(r.jsx)("h2",{class:"font-weight-bold d-block",children:a.following.length}),Object(r.jsxs)("small",{class:"text-muted",children:[" ",Object(r.jsx)("i",{class:"fas fa-user"}),"Following"]})]})]})})]}),o.userId===c.params.id&&Object(r.jsx)(Te,{showMyPosts:!0})]})})]})}}]),n}(a.Component)),Ye=Object(f.b)((function(e){return{signedInUser:e.authReducer.user,posts:e.postReducer.posts}}),(function(e){return{getUser:function(t){return e(ee(t))},followUser:function(t,n){return e(te(t,n))},unFollowUser:function(t,n){return e(ne(t,n))},getFollowers:function(t){return e(re(t))},getFollowing:function(t){return e(ae(t))}}}))(Qe),$e=n(200),Xe=n(162),Ze=n(213),et=n(214),tt=function(e){Object(j.a)(n,e);var t=Object(h.a)(n);function n(){var e;Object(d.a)(this,n);for(var r=arguments.length,a=new Array(r),s=0;s<r;s++)a[s]=arguments[s];return(e=t.call.apply(t,[this].concat(a))).state={user:{}},e.componentDidMount=function(){var t=e.props,n=t.id;(0,t.getUser)(n).then((function(t){e.setState({user:t.payload.user})}))},e}return Object(p.a)(n,[{key:"render",value:function(){var e=this.state.user;return Object(r.jsx)(i.b,{to:"/profile/".concat(e._id),style:{color:"inherit"},children:Object(r.jsxs)(Xe.a,{style:{borderLeft:"1px solid green",marginBottom:"4px"},children:[Object(r.jsx)(Ze.a,{children:Object(r.jsx)(ue.a,{src:"https://robohash.org/".concat(e.email),style:{marginBottom:"12px"}})}),Object(r.jsx)(et.a,{primary:e.name})]})})}}]),n}(a.Component),nt=function(e){Object(j.a)(n,e);var t=Object(h.a)(n);function n(){var e;return Object(d.a)(this,n),(e=t.call(this)).handleChange=function(t){e.setState(Object(A.a)({},t.target.name,t.target.value))},e.handleSubmit=function(t){t.preventDefault(),e.props.createpost(e.state.postText,e.props.user),e.setState({postText:""})},e.componentDidMount=Object(K.a)(V.a.mark((function t(){return V.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.props.getUser(e.props.signedInUser.userId).then((function(t){e.setState({followers:t.payload.user.followers})}));case 2:case"end":return t.stop()}}),t)}))),e.state={postText:"",followers:[]},e}return Object(p.a)(n,[{key:"render",value:function(){var e=this.state.followers,t=this.props,n=t.classes,a=(t.user,t.getUser);return Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)(Ae,{}),Object(r.jsxs)(qe.a,{item:!0,xs:12,md:6,className:n.grid,children:[Object(r.jsx)(ie.a,{variant:"h6",className:n.title,children:"My Followers"}),Object(r.jsx)($e.a,{dense:!1,children:e.map((function(e){return Object(r.jsx)(tt,{getUser:a,id:e})}))})]})]})}}]),n}(a.Component),rt=W()(Object(H.a)((function(e){return{root:{flexGrow:1,maxWidth:752},demo:{backgroundColor:e.palette.background.paper},title:{margin:e.spacing(4,0,2)},grid:{marginLeft:"10%"}}})),Object(f.b)((function(e){return{signedInUser:e.authReducer.user,user:e.userReducer}}),(function(e){return{getUser:function(t){return e(ee(t))},getFollowers:function(t){return e(re(t))}}})))(nt),at=n(215),st=function(e){Object(j.a)(n,e);var t=Object(h.a)(n);function n(){var e;Object(d.a)(this,n);for(var r=arguments.length,a=new Array(r),s=0;s<r;s++)a[s]=arguments[s];return(e=t.call.apply(t,[this].concat(a))).state={user:{}},e.componentDidMount=function(){var t=e.props,n=t.id;(0,t.getUser)(n).then((function(t){e.setState({user:t.payload.user})}))},e.Unfollow=Object(K.a)(V.a.mark((function t(){var n,r,a,s;return V.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.props,r=n.id,a=n.signedInUserId,s=n.UnfollowUser,t.next=3,s(a,r);case 3:e.props.reload();case 4:case"end":return t.stop()}}),t)}))),e}return Object(p.a)(n,[{key:"render",value:function(){var e=this.state.user;return Object(r.jsxs)(Xe.a,{style:{borderLeft:"1px solid green",marginBottom:"4px"},children:[Object(r.jsxs)(i.b,{to:"/profile/".concat(e._id),style:{color:"inherit",display:"flex"},children:[Object(r.jsx)(Ze.a,{children:Object(r.jsx)(ue.a,{src:"https://robohash.org/".concat(e.email),style:{marginBottom:"12px"}})}),Object(r.jsx)(et.a,{primary:e.name})]}),Object(r.jsx)(at.a,{children:Object(r.jsx)(B.a,{variant:"outlined",color:"primary",onClick:this.Unfollow,children:"Unfollow"})})]})}}]),n}(a.Component),ot=function(e){Object(j.a)(n,e);var t=Object(h.a)(n);function n(){var e;return Object(d.a)(this,n),(e=t.call(this)).handleChange=function(t){e.setState(Object(A.a)({},t.target.name,t.target.value))},e.handleSubmit=function(t){t.preventDefault(),e.props.createpost(e.state.postText,e.props.user),e.setState({postText:""})},e.componentDidMount=Object(K.a)(V.a.mark((function t(){return V.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.props.getUser(e.props.signedInUser.userId).then((function(t){e.setState({followings:t.payload.user.following})}));case 2:case"end":return t.stop()}}),t)}))),e.state={postText:"",followings:[]},e}return Object(p.a)(n,[{key:"render",value:function(){var e=this,t=this.state.followings,n=this.props,a=n.classes,s=n.getUser,o=n.UnfollowUser;return Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)(Ae,{}),Object(r.jsxs)(qe.a,{item:!0,xs:12,md:6,className:a.grid,children:[Object(r.jsx)(ie.a,{variant:"h6",className:a.title,children:"My Followings"}),Object(r.jsx)($e.a,{dense:!1,children:t.map((function(t){return Object(r.jsx)(st,{id:t,getUser:s,signedInUserId:e.props.signedInUser.userId,UnfollowUser:o,reload:e.componentDidMount})}))})]})]})}}]),n}(a.Component),ct=W()(Object(H.a)((function(e){return{root:{flexGrow:1,maxWidth:752},demo:{backgroundColor:e.palette.background.paper},title:{margin:e.spacing(4,0,2)},grid:{marginLeft:"10%"}}})),Object(f.b)((function(e){return{signedInUser:e.authReducer.user,user:e.userReducer}}),(function(e){return{getUser:function(t){return e(ee(t))},getFollowers:function(t){return e(re(t))},UnfollowUser:function(t,n){return e(ne(t,n))}}})))(ot),it=Object(c.f)(u()((function(){return Object(r.jsxs)(c.c,{children:[Object(r.jsx)(c.a,{exact:!0,path:"/",component:We}),Object(r.jsx)(c.a,{path:"/register",component:Be}),Object(r.jsx)(c.a,{path:"/login",component:ze}),Object(r.jsx)(c.a,{path:"/discover",component:Ke}),Object(r.jsx)(c.a,{path:"/profile/:id",component:Ye}),Object(r.jsx)(c.a,{path:"/followers",component:rt}),Object(r.jsx)(c.a,{path:"/followings",component:ct}),Object(r.jsx)(c.a,{component:We})]})}))),lt=function(){return Object(r.jsx)(i.a,{basename:"/my-network",children:Object(r.jsx)(it,{})})},ut=function(){return Object(r.jsx)(lt,{})},dt=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function pt(e){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var t=e.installing;t.onstatechange=function(){"installed"===t.state&&(navigator.serviceWorker.controller?console.log("New content is available; please refresh."):console.log("Content is cached for offline use."))}}})).catch((function(e){console.error("Error during service worker registration:",e)}))}var jt=n(102),ht=n(103),ft=n(13),bt=n(104),mt=n.n(bt),Ot={isAuthenticated:!1,user:{}},gt={},xt=n(77),vt={posts:[]},wt={allUsers:[],followers:[],following:[],currUser:{}},yt=Object(Re.combineReducers)({authReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ot,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case T:return Object(ft.a)(Object(ft.a)({},e),{},{isAuthenticated:!mt()(t.payload),user:t.payload});default:return e}},errorReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:gt,t=arguments.length>1?arguments[1]:void 0;return t.type===S||t.type===I?t.payload:e},postReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:vt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case k:return Object(ft.a)(Object(ft.a)({},e),{},{posts:t.payload});case w:return Object(ft.a)(Object(ft.a)({},e),{},{posts:[{_id:t.payload._id,author:t.payload.author,authorId:t.payload.authorId,comments:[],likers:t.payload.likers,likesCount:t.payload.likesCount,text:t.payload.text,timestamp:t.payload.timestamp}].concat(Object(xt.a)(e.posts))});case y:return Object(ft.a)(Object(ft.a)({},e),{},{posts:e.posts.filter((function(e){return e._id!==t.id}))});case C:return Object(ft.a)(Object(ft.a)({},e),{},{posts:e.posts.map((function(e){return e._id===t.payload._id?Object(ft.a)(Object(ft.a)({},e),{},{likers:t.payload.likers,likesCount:t.payload.likesCount}):e}))});case U:return Object(ft.a)(Object(ft.a)({},e),{},{posts:e.posts.map((function(e){return e._id==t.payload._id?Object(ft.a)(Object(ft.a)({},e),{},{comments:[].concat(Object(xt.a)(e.comments),[{_id:t.payload.comments[t.payload.comments.length-1]._id,commenterId:t.commenterId,text:t.text}])}):e}))});default:return e}},userReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:wt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case R:return Object(ft.a)(Object(ft.a)({},e),{},{followers:t.payload.user.followers});case N:return Object(ft.a)(Object(ft.a)({},e),{},{following:t.payload.user.following});case _:return Object(ft.a)(Object(ft.a)({},e),{},{currUser:t.payload});case F:return Object(ft.a)(Object(ft.a)({},e),{},{allUsers:t.payload});case L:return Object(ft.a)(Object(ft.a)({},e),{},{allUsers:e.allUsers.map((function(e){return e._id===t.payload._id?Object(ft.a)(Object(ft.a)({},e),{},{followers:t.payload.followers}):e}))});case D:return Object(ft.a)(Object(ft.a)({},e),{},{following:t.payload.following});default:return e}}}),kt=Object(Re.createStore)(yt,Object(jt.composeWithDevTools)(Object(Re.applyMiddleware)(ht.a)));if(localStorage.jwtToken){g(localStorage.jwtToken);var Ct=Object(O.a)(localStorage.jwtToken);kt.dispatch(E(Ct));var Ut=Date.now()/1e3;Ct.exp<Ut&&(kt.dispatch(P()),window.location.href="/login")}o.a.render(Object(r.jsx)(f.a,{store:kt,children:Object(r.jsx)(ut,{})}),document.getElementById("root")),function(){if("serviceWorker"in navigator){if(new URL("/my-network",window.location).origin!==window.location.origin)return;window.addEventListener("load",(function(){var e="".concat("/my-network","/service-worker.js");dt?(!function(e){fetch(e).then((function(t){404===t.status||-1===t.headers.get("content-type").indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):pt(e)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://goo.gl/SC7cgQ")}))):pt(e)}))}}()},96:function(e,t,n){}},[[160,1,2]]]);
//# sourceMappingURL=main.dd04ac28.chunk.js.map