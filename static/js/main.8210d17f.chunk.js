(this["webpackJsonpmy-network"]=this["webpackJsonpmy-network"]||[]).push([[0],{105:function(e,t){e.exports=function(e){return void 0===e||null===e||"object"===typeof e&&0===Object.keys(e).length||"string"===typeof e&&0===e.trim().length}},129:function(e,t,n){},159:function(e,t,n){},160:function(e,t,n){},161:function(e,t,n){"use strict";n.r(t);var r=n(2),a=n(0),s=n(15),o=n.n(s),c=(n(129),n(20)),i=n(21),l=n(74),u=n.n(l),d=n(102),p=n(8),j=n(9),h=n(11),f=n(10),b=n(18),m=n(22),O=n.n(m),g=n(59),x=function(e){e?O.a.defaults.headers.common.Authorization=e:delete O.a.defaults.headers.common.Authorization},v="https://my-network-api.herokuapp.com/",w={users:v+"users",login:v+"users/login",register:v+"users/register",follower:v+"users/follower",unfollower:v+"users/unfollower",following:v+"users/following",unfollowing:v+"users/unfollowing",posts:v+"posts"},y="CREATE_POST",k="DELETE_POST",C="GET_POST",U="UPDATE_POST_LIKES",I="ADD_COMMENT",S="GET_ERRORS",T="IND_NO_ERRORS",R="SET_CURR_USER",N="GET_FOLLOWERS",F="GET_FOLLOLWING",_="GET_ALL_USERS",L="GET_USER",D="UPDATE_FOLLOWERS",E="UPDATE_FOLLOWING",P=function(e){return{type:R,payload:e}},A=function(){return function(e){localStorage.removeItem("jwtToken"),x(!1),e(P({})),window.location.href="/login"}},M=n(24),W=n(35),G=n.n(W),B=n(217),H=n(202),z=n(5),q=function(e){Object(h.a)(n,e);var t=Object(f.a)(n);function n(){var e;return Object(p.a)(this,n),(e=t.call(this)).handleChange=function(t){e.setState(Object(M.a)({},t.target.name,t.target.value))},e.handleSubmit=function(t){t.preventDefault(),console.log("posted"),e.props.createpost(e.state.postText,e.props.user),e.setState({postText:""})},e.state={postText:""},e}return Object(j.a)(n,[{key:"render",value:function(){var e=this.state.postText,t=this.props.classes;return Object(r.jsxs)("form",{className:t.container,noValidate:!0,autoComplete:"off",onSubmit:this.handleSubmit,children:[Object(r.jsx)(B.a,{name:"postText",placeholder:"What's on your mind?",multiline:!0,className:t.textField,margin:"normal",rowsMax:"5",value:e,onChange:this.handleChange}),Object(r.jsx)(H.a,{variant:"contained",color:"primary",className:t.button,type:"submit",children:"Post"})]})}}]),n}(a.Component),J=G()(Object(z.a)((function(e){return{button:{margin:e.spacing.unit},container:{display:"flex",justifyContent:"center",marginTop:"16px"},textField:{marginLeft:e.spacing.unit,marginRight:e.spacing.unit,width:500}}})),Object(b.b)((function(e){return{user:e.authReducer.user}}),(function(e){return{createpost:function(t,n){return e(function(e,t){return function(n){O.a.post(w.posts,{text:e,author:t.name,authorId:t.userId}).then((function(e){return n({type:y,payload:e.data})}))}}(t,n))}}})))(q),V=n(7),K=n.n(V),Q=n(17),Y=n(73),$=n.n(Y),X=n(51),Z=n(203),ee=Object(z.a)({progress:{left:"50%",position:"absolute",top:"50%",transform:"translate(-50%,-50%)"}})((function(e){var t=e.classes;return Object(r.jsx)("div",{className:t.progress,children:Object(r.jsx)(Z.a,{className:t.l,size:50})})})),te=function(e){return function(){var t=Object(Q.a)(K.a.mark((function t(n){var r;return K.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,O.a.get("".concat(w.users,"/").concat(e));case 3:return r=t.sent,t.abrupt("return",n({type:L,payload:r.data}));case 7:return t.prev=7,t.t0=t.catch(0),t.abrupt("return",t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}()},ne=function(e,t){return function(){var n=Object(Q.a)(K.a.mark((function n(r){var a,s;return K.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,O.a.patch("".concat(w.following,"/").concat(e),{idToFollow:t});case 2:return a=n.sent,n.next=5,O.a.patch("".concat(w.follower,"/").concat(t),{followerId:e});case 5:return s=n.sent,r({type:D,payload:s.data}),n.abrupt("return",r({type:E,payload:a.data}));case 8:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()},re=function(e,t){return function(){var n=Object(Q.a)(K.a.mark((function n(r){var a,s;return K.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,O.a.patch("".concat(w.unfollowing,"/").concat(e),{idToUnfollow:t});case 2:return a=n.sent,n.next=5,O.a.patch("".concat(w.unfollower,"/").concat(t),{followerId:e});case 5:return s=n.sent,r({type:D,payload:s.data}),n.abrupt("return",r({type:E,payload:a.data}));case 8:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()},ae=function(e){return function(){var t=Object(Q.a)(K.a.mark((function t(n){var r;return K.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,O.a.get("".concat(w.users,"/").concat(e));case 2:return r=t.sent,t.abrupt("return",n({type:N,payload:r.data}));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},se=function(e){return function(){var t=Object(Q.a)(K.a.mark((function t(n){var r;return K.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,O.a.get("".concat(w.users,"/").concat(e));case 2:return r=t.sent,t.abrupt("return",n({type:F,payload:r.data}));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},oe=n(205),ce=n(204),ie=n(207),le=n(40),ue=n(208),de=n(218),pe=n(209),je=n(206),he=n(100),fe=n.n(he),be=n(101),me=n.n(be),Oe=n(58),ge=n.n(Oe),xe=n(99),ve=n.n(xe),we=function(e){Object(h.a)(n,e);var t=Object(f.a)(n);function n(){var e;return Object(p.a)(this,n),(e=t.call(this)).handleChange=function(t){e.setState(Object(M.a)({},t.target.name,t.target.value))},e.componentDidMount=function(){var t=e.props,n=t.commenterId;(0,t.getUser)(n).then((function(t){e.setState({name:t.payload.user.name})}))},e.postComment=function(t){t.preventDefault(),""!==e.state.text.trim()&&(e.props.addComment(e.props.commenterId,e.props.postId,e.state.text),e.setState({text:""}))},e.state={text:"",name:""},e}return Object(j.a)(n,[{key:"render",value:function(){var e=this.props.classes;return Object(r.jsx)(ce.a,{className:e.CardHeader,title:Object(r.jsxs)("div",{className:e.cardHeaderTitle,children:[Object(r.jsx)(de.a,{"aria-label":"recipe",className:e.avatar,children:this.state.name.charAt(0)}),Object(r.jsx)(B.a,{multiline:!0,placeholder:"Write a comment",className:e.commentField,onChange:this.handleChange,name:"text",value:this.state.text}),Object(r.jsx)(H.a,{variant:"contained",className:e.button,onClick:this.postComment,children:Object(r.jsx)(ve.a,{})})]})})}}]),n}(a.Component),ye=Object(z.a)((function(e){return{button:{marginBottom:e.spacing.unit,marginLeft:e.spacing.unit},cardHeader:{paddingTop:e.spacing.unit,paddingBottom:e.spacing.unit},cardHeaderTitle:{display:"flex"},commentField:{width:"90%",marginLeft:e.spacing.unit,marginTop:e.spacing.unit}}}))(we),ke=function(e){Object(h.a)(n,e);var t=Object(f.a)(n);function n(){var e;Object(p.a)(this,n);for(var r=arguments.length,a=new Array(r),s=0;s<r;s++)a[s]=arguments[s];return(e=t.call.apply(t,[this].concat(a))).state={name:""},e.componentDidMount=function(){var t=e.props,n=t.comment;(0,t.getUser)(n.commenterId).then((function(t){e.setState({name:t.payload.user.name})}))},e}return Object(j.a)(n,[{key:"render",value:function(){var e=this.props,t=e.classes,n=e.comment,a=this.state.name;return Object(r.jsx)(ce.a,{avatar:Object(r.jsx)(de.a,{"aria-label":"recipe",className:t.avatar,children:a.charAt(0)}),title:Object(r.jsxs)("div",{className:t.commentContent,children:[Object(r.jsx)("div",{style:{display:"flex",justifyContent:"space-between"},children:Object(r.jsxs)("div",{style:{flexDirection:"column"},children:[Object(r.jsx)("div",{className:t.commenter,children:Object(r.jsx)(i.b,{className:t.link,to:"/login",children:a})}),Object(r.jsx)("div",{className:t.timestamp,children:X(n.createdAt).fromNow()})]})}),Object(r.jsx)("div",{className:t.commentText,children:n.text})]})})}}]),n}(a.Component),Ce=Object(z.a)((function(e){return{cardHeader:{paddingTop:e.spacing.unit,paddingBottom:e.spacing.unit},commentContent:{backgroundColor:"#CFD8DC",borderRadius:"10px",padding:e.spacing.unit},commentText:{fontWeight:"400"},commenter:{fontWeight:"800"},link:{color:"#000",textDecoration:"none"},timestamp:{fontSize:"11px"}}}))(ke),Ue=function(e){Object(h.a)(n,e);var t=Object(f.a)(n);function n(){return Object(p.a)(this,n),t.apply(this,arguments)}return Object(j.a)(n,[{key:"render",value:function(){var e=this.props,t=e.addComment,n=e.commenterId,a=e.comments,s=e.postId,o=e.getUser;e.UserId;return Object(r.jsxs)("div",{children:[Object(r.jsx)("hr",{}),!!a.length&&a.map((function(e){return Object(r.jsx)(Ce,{comment:e,getUser:o},e._id)})),Object(r.jsx)(ye,{addComment:t,commenterId:n,postId:s,getUser:o})]})}}]),n}(a.Component),Ie=function(e){Object(h.a)(n,e);var t=Object(f.a)(n);function n(){var e;return Object(p.a)(this,n),(e=t.call(this)).componentDidMount=Object(Q.a)(K.a.mark((function t(){var n,r,a;return K.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.props,r=n.post,a=n.getUser,t.next=3,a(r.authorId).then((function(t){t&&(console.log("cr",t),e.setState({email:t.payload.user.email}))}));case 3:case"end":return t.stop()}}),t)}))),e.handleOpenComment=function(){e.setState({openComments:!e.state.openComments})},e.state={email:"",openComments:!1},e}return Object(j.a)(n,[{key:"render",value:function(){var e=this,t=this.props,n=t.classes,a=t.post,s=t.userId,o=t.updatePostLikes,c=t.getUser,l=t.addComment,u=X(a.createdAt).fromNow();return Object(r.jsxs)(oe.a,{className:n.card,children:[Object(r.jsx)(ce.a,{avatar:Object(r.jsx)(de.a,{"aria-label":"recipe",className:n.avatar,src:"https://robohash.org/".concat(this.state.email)}),action:a.authorId===s?Object(r.jsx)(je.a,{"aria-label":"settings",children:Object(r.jsx)(ge.a,{color:"secondary",onClick:function(){return e.props.deletePost(a._id)}})}):null,title:Object(r.jsx)(i.b,{className:n.link,to:"/login",children:a.author}),subheader:u}),Object(r.jsx)(ie.a,{children:Object(r.jsx)(le.a,{children:a.text})}),Object(r.jsxs)(ue.a,{className:n.actions,disableActionSpacing:!0,children:[Object(r.jsxs)("div",{children:[Object(r.jsx)(je.a,{"aria-label":"Like",onClick:function(){return a.likers.includes(s)?o("unlike",a._id,s):o("like",a._id,s)},children:Object(r.jsx)(fe.a,{style:a.likers.includes(s)?{color:"#3f51b5"}:null})}),a.likesCount]}),Object(r.jsxs)("div",{style:{marginLeft:"20px"},children:[Object(r.jsx)(je.a,{onClick:this.handleOpenComment,children:Object(r.jsx)(me.a,{})}),a.comments.length]})]}),Object(r.jsx)(pe.a,{in:this.state.openComments,timeout:"auto",unmountOnExit:!0,children:Object(r.jsx)(Ue,{comments:a.comments,postId:a._id,commenterId:s,addComment:l,getUser:c})})]})}}]),n}(a.Component),Se=Object(z.a)((function(e){return{actions:{display:"flex"},card:{margin:"20px auto",width:"70%"},link:{color:"#000",textDecoration:"none"}}}))(Ie),Te=function(e){Object(h.a)(n,e);var t=Object(f.a)(n);function n(){var e;return Object(p.a)(this,n),(e=t.call(this)).componentDidMount=Object(Q.a)(K.a.mark((function t(){var n,r,a,s;return K.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.props,r=n.getPosts,a=n.getFollowing,!(s=n.user)){t.next=4;break}return t.next=4,r().then((function(){a(s.userId).then((function(t){var n=t.payload&&t.payload.user?t.payload.user.following:[];e.setState({following:n,loading:!1})}))}));case 4:case"end":return t.stop()}}),t)}))),e.state={posts:[],loading:!0},e}return Object(j.a)(n,[{key:"render",value:function(){var e=this,t=this.state,n=t.loading,a=t.following,s=this.props,o=s.user,c=s.getUser,i=s.updatePostLikes,l=s.addComment,u=s.deletePost;return n?Object(r.jsx)(ee,{}):Object(r.jsx)(r.Fragment,{children:this.props.posts.map((function(t){return!e.props.showMyPosts&&a.includes(t.authorId)||t.authorId===o.userId?Object(r.jsx)(Se,{post:t,userId:o.userId,getUser:function(e){return c(e)},updatePostLikes:function(e,t,n){return i(e,t,n)},addComment:l,deletePost:u}):null}))})}}]),n}(a.Component),Re=Object(b.b)((function(e){return{user:e.authReducer.user,posts:e.postReducer.posts}}),(function(e){return{deletePost:function(t){return e(function(e){return function(t){return O.a.delete("".concat(w.posts,"/").concat(e)).then((function(n){return t({type:k,id:e})}))}}(t))},getPosts:function(){return e((function(e){return O.a.get(w.posts).then((function(t){return e({type:C,payload:t.data})}))}))},getUser:function(t){return e(te(t))},getFollowing:function(t){return e(se(t))},updatePostLikes:function(t,n,r){return e(function(e,t,n){return function(r){return O.a.patch("".concat(w.posts,"/").concat(t),{action:e,id:n}).then((function(e){return r({type:U,payload:e.data})}))}}(t,n,r))},addComment:function(t,n,r){return e(function(e,t,n){return function(r){return O.a.patch("".concat(w.posts,"/").concat(t),{action:"addComment",commenterId:e,text:n}).then((function(t){return r({type:I,payload:t.data,commenterId:e,text:n})}))}}(t,n,r))}}}))(Te),Ne=n(29),Fe=n(211),_e=n(212),Le=n(106),De=n(210),Ee=function(e){Object(h.a)(n,e);var t=Object(f.a)(n);function n(){var e;Object(p.a)(this,n);for(var r=arguments.length,a=new Array(r),s=0;s<r;s++)a[s]=arguments[s];return(e=t.call.apply(t,[this].concat(a))).state={anchorEl:null},e.handleClick=function(t){e.setState({anchorEl:t.currentTarget})},e.handleClose=function(){e.setState({anchorEl:null})},e}return Object(j.a)(n,[{key:"render",value:function(){var e=this.props,t=e.classes,n=e.logoutUser,a=e.user,s=this.state.anchorEl;return Object(r.jsxs)("div",{children:[Object(r.jsxs)(H.a,{"aria-owns":s?"right-menu":null,"aria-haspopup":"true",className:t.menuButton,onClick:this.handleClick,children:[Object(r.jsx)(de.a,{alt:"Remy Sharp",className:t.avatar,src:"https://robohash.org/".concat(a.email)}),Object(r.jsx)("h5",{style:{padding:"6px 0 0 5px"},children:a.name})]}),Object(r.jsxs)(Le.a,{id:"right-menu",anchorEl:s,open:Boolean(s),onClose:this.handleClose,children:[Object(r.jsx)("a",{className:t.link,href:"/",children:Object(r.jsx)(De.a,{onClick:this.handleClose,children:"Home"})}),Object(r.jsx)("a",{className:t.link,href:"/profile/".concat(a.userId),children:Object(r.jsx)(De.a,{onClick:this.handleClose,children:"Profile"})}),Object(r.jsx)("a",{className:t.link,href:"/discover",children:Object(r.jsx)(De.a,{onClick:this.handleClose,children:"Discover"})}),Object(r.jsx)(De.a,{onClick:function(){return n()},children:"Logout"})]})]})}}]),n}(a.Component),Pe=Object(z.a)({link:{outline:"none",textDecoration:"none",color:"black"},menuButton:{color:"#fff",fontSize:"18px",marginRight:"-15px",textTransform:"none"}})(Ee),Ae=function(e){Object(h.a)(n,e);var t=Object(f.a)(n);function n(){return Object(p.a)(this,n),t.apply(this,arguments)}return Object(j.a)(n,[{key:"render",value:function(){var e=this.props,t=e.classes,n=e.user,a=e.logout;return Object(r.jsx)("div",{className:t.root,children:Object(r.jsx)(Fe.a,{position:"static",children:Object(r.jsxs)(_e.a,{children:[Object(r.jsx)(le.a,{className:t.flex,variant:"title",color:"inherit",children:Object(r.jsx)("a",{className:t.logo,href:"/",children:"My Network"})}),Object(r.jsx)("div",{children:Object(r.jsx)(Pe,{logoutUser:a,user:n})})]})})})}}]),n}(a.Component),Me=Object(Ne.compose)(Object(z.a)({flex:{flexGrow:1},logo:{color:"#fff",textDecoration:"none"},menuButton:{marginLeft:-12,marginRight:20},root:{flexGrow:1}}),Object(b.b)((function(e){return{user:e.authReducer.user}}),(function(e){return{logout:function(){return e(A())}}})))(Ae),We=function(e){Object(h.a)(n,e);var t=Object(f.a)(n);function n(){var e;Object(p.a)(this,n);for(var r=arguments.length,a=new Array(r),s=0;s<r;s++)a[s]=arguments[s];return(e=t.call.apply(t,[this].concat(a))).componentDidMount=function(){localStorage.jwtToken||e.props.history.push("/login")},e}return Object(j.a)(n,[{key:"render",value:function(){return Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)(Me,{}),Object(r.jsx)(J,{}),Object(r.jsx)(Re,{})]})}}]),n}(a.Component),Ge=Object(b.b)((function(e){return{logout:function(){return e(A())}}}))(We),Be=(n(97),function(e){Object(h.a)(n,e);var t=Object(f.a)(n);function n(){var e;return Object(p.a)(this,n),(e=t.call(this)).handleChange=function(t){var n;e.setState((n={},Object(M.a)(n,t.target.name,t.target.value),Object(M.a)(n,"errors",{}),Object(M.a)(n,"success",!1),n))},e.handleSubmit=function(){var t=Object(Q.a)(K.a.mark((function t(n){var r,a,s,o,c;return K.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n.preventDefault(),r=e.state,a=r.name,s=r.email,o=r.password,c=r.confirmPassword,o===c){t.next=6;break}return"Passwords do not match.",e.setState({password:"",confirmPassword:"",errors:{message:"Passwords do not match."}}),t.abrupt("return");case 6:e.props.createUser({name:a,email:s,password:o});case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.state={name:"",email:"",password:"",confirmPassword:"",errors:{},registered:!1,success:!1},e}return Object(j.a)(n,[{key:"componentWillReceiveProps",value:function(e){if(e.error.success&&this.setState({success:!0}),e.error){var t=e.error.error;this.setState({errors:{message:t}})}}},{key:"render",value:function(){var e=this.state,t=e.errors,n=e.name,a=e.email,s=e.password,o=e.confirmPassword,c=e.success,l=e.loading;return Object(r.jsx)("div",{class:"container",children:Object(r.jsx)("section",{id:"content",children:Object(r.jsxs)("form",{onSubmit:this.handleSubmit,autoComplete:"off",children:[Object(r.jsx)("h1",{children:"Create a new account"}),t.message&&Object(r.jsx)("p",{style:{textAlign:"left",marginLeft:"10%",border:"2px solid red",padding:"4px",maxWidth:"290px"},children:t.message}),c&&Object(r.jsxs)("p",{style:{textAlign:"left",marginLeft:"10%",border:"2px solid green",padding:"4px",maxWidth:"290px"},children:["You have been registered successfully.",Object(r.jsx)(i.c,{to:"/login",children:"CLick Here"})," to login."]}),Object(r.jsx)("div",{children:Object(r.jsx)("input",{type:"text",placeholder:"name",name:"name",value:n,onChange:this.handleChange,required:!0})}),Object(r.jsx)("div",{children:Object(r.jsx)("input",{type:"email",placeholder:"Email",name:"email",value:a,onChange:this.handleChange,autocomplete:"off",required:!0})}),Object(r.jsx)("div",{children:Object(r.jsx)("input",{type:"password",placeholder:"Password",name:"password",value:s,onChange:this.handleChange,required:!0})}),Object(r.jsx)("div",{children:Object(r.jsx)("input",{type:"password",placeholder:"Confirm Password",name:"confirmPassword",value:o,onChange:this.handleChange,required:!0})}),Object(r.jsxs)("div",{children:[Object(r.jsx)("input",{type:"submit",value:"Register",disabled:l||c}),Object(r.jsx)(i.c,{to:"/login",children:"Log In"})]})]})})})}}]),n}(a.Component)),He=Object(b.b)((function(e){return{auth:e.authReducer,error:e.errorReducer}}),(function(e){return{createUser:function(t){return e(function(e){return function(t){O.a.post(w.register,e).then((function(e){t({type:T,payload:{success:!0}})})).catch((function(e){t({type:S,payload:e.response.data})}))}}(t))}}}))(Be),ze=function(e){Object(h.a)(n,e);var t=Object(f.a)(n);function n(){var e;return Object(p.a)(this,n),(e=t.call(this)).componentWillReceiveProps=function(t){if(t.auth.isAuthenticated&&e.props.history.push("/"),t.error){var n=t.error.message;e.setState({errors:{message:n}})}},e.componentDidMount=function(){e.props.auth.isAuthenticated&&e.props.history.push("/")},e.handleChange=function(t){var n;e.setState((n={},Object(M.a)(n,t.target.name,t.target.value),Object(M.a)(n,"errors",{}),n))},e.handleSubmit=function(t){console.log("submitted"),t.preventDefault();var n=e.state,r={email:n.email,password:n.password};e.props.signIn(r)},e.state={email:"",password:"",errors:{}},e}return Object(j.a)(n,[{key:"render",value:function(){var e=this.state,t=e.errors,n=e.email,a=e.password;return Object(r.jsx)("div",{class:"container",children:Object(r.jsx)("section",{id:"content",children:Object(r.jsxs)("form",{onSubmit:this.handleSubmit,children:[Object(r.jsx)("h1",{children:"Login to your account"}),t.message&&Object(r.jsx)("p",{style:{textAlign:"left",marginLeft:"10%",border:"2px solid red",padding:"4px",maxWidth:"290px"},children:t.message}),Object(r.jsx)("div",{children:Object(r.jsx)("input",{type:"email",placeholder:"Email",name:"email",value:n,onChange:this.handleChange})}),Object(r.jsx)("div",{children:Object(r.jsx)("input",{type:"password",placeholder:"Password",name:"password",value:a,onChange:this.handleChange})}),Object(r.jsxs)("div",{children:[Object(r.jsx)("input",{type:"submit",value:"Log In"}),Object(r.jsx)(i.c,{to:"/register",children:"Register"})]})]})})})}}]),n}(a.Component),qe=Object(b.b)((function(e){return{auth:e.authReducer,error:e.errorReducer}}),(function(e){return{signIn:function(t){return e(function(e){return function(t){O.a.post(w.login,e).then((function(e){var n=e.data.token;localStorage.setItem("jwtToken",n),x(n);var r=Object(g.a)(n);t(P(r))})).catch((function(e){t({type:S,payload:e.response.data})}))}}(t))}}}))(ze),Je=n(213),Ve=(n(159),function(e){Object(h.a)(n,e);var t=Object(f.a)(n);function n(){var e;Object(p.a)(this,n);for(var r=arguments.length,a=new Array(r),s=0;s<r;s++)a[s]=arguments[s];return(e=t.call.apply(t,[this].concat(a))).state={name:""},e}return Object(j.a)(n,[{key:"render",value:function(){var e=this,t=this.props.user,n="https://robohash.org/".concat(t.email);return Object(r.jsxs)("div",{class:"center",children:[Object(r.jsxs)("div",{class:"profile",children:[Object(r.jsx)("div",{class:"image",children:Object(r.jsx)("img",{src:n,width:"70",height:"70",alt:"ava"})}),Object(r.jsx)("div",{class:"name",children:t.name}),Object(r.jsxs)("div",{class:"actions",children:[Object(r.jsx)(i.b,{to:"/profile/".concat(t._id),children:Object(r.jsx)("button",{class:"btn",children:"View"})}),Object(r.jsx)("button",{class:"btn",onClick:function(){return e.props.followUser(e.props.currUserId,t._id)},children:"Follow"})]})]}),Object(r.jsxs)("div",{class:"stats",children:[Object(r.jsxs)("div",{class:"box",children:[Object(r.jsx)("span",{class:"value",children:t.followers.length}),Object(r.jsx)("span",{class:"parameter",children:"Followers"})]}),Object(r.jsxs)("div",{class:"box",children:[Object(r.jsx)("span",{class:"value",children:t.following.length}),Object(r.jsx)("span",{class:"parameter",children:"Following"})]})]})]})}}]),n}(a.Component)),Ke=function(e){Object(h.a)(n,e);var t=Object(f.a)(n);function n(){var e;return Object(p.a)(this,n),(e=t.call(this)).componentDidMount=Object(Q.a)(K.a.mark((function t(){return K.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.props.getAllUsers();case 2:e.setState({loading:!1});case 3:case"end":return t.stop()}}),t)}))),e.state={loading:!0,following:[]},e}return Object(j.a)(n,[{key:"render",value:function(){var e=this,t=this.props,n=t.userReducer,a=t.classes,s=t.authReducer;return this.state.loading?Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)(ee,{}),Object(r.jsx)(Me,{})]}):Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)(Me,{}),Object(r.jsx)("div",{className:$()(a.layout,a.cardGrid),children:Object(r.jsx)(Je.a,{container:!0,justify:"center",children:n.allUsers.map((function(t){return t._id===s.user.userId||t.followers.includes(s.user.userId)?null:Object(r.jsx)(Je.a,{item:!0,children:Object(r.jsx)(Ve,{followUser:e.props.followUser,user:t,currUserId:s.user.userId})},t._id)}))})})]})}}]),n}(a.Component),Qe=G()(Object(z.a)((function(e){return{cardGrid:{padding:"".concat(4*e.spacing.unit,"px 0")},layout:Object(M.a)({width:"auto"},e.breakpoints.up("sm"),{marginLeft:3*e.spacing.unit,marginRight:3*e.spacing.unit})}})),Object(b.b)((function(e){return{authReducer:e.authReducer,userReducer:e.userReducer}}),(function(e){return{followUser:function(t,n){return e(ne(t,n))},getAllUsers:function(){return e(function(){var e=Object(Q.a)(K.a.mark((function e(t){var n;return K.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.a.get(w.users);case 2:return n=e.sent,e.abrupt("return",t({type:_,payload:n.data}));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}}})))(Ke),Ye=(n(160),function(e){Object(h.a)(n,e);var t=Object(f.a)(n);function n(){var e;return Object(p.a)(this,n),(e=t.call(this)).componentDidMount=Object(Q.a)(K.a.mark((function t(){var n,r,a;return K.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(localStorage.jwtToken){t.next=2;break}return t.abrupt("return",e.props.history.push("/login"));case 2:n=e.props,r=n.getUser,a=n.match,r(a.params.id).then((function(t){e.setState({pageUser:t.payload.user,loading:!1})}));case 4:case"end":return t.stop()}}),t)}))),e.handleFollow=function(){var t=Object(Q.a)(K.a.mark((function t(n){var r,a,s,o,c;return K.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=e.props,a=r.signedInUser,s=r.followUser,o=r.unFollowUser,c=r.match,!n){t.next=6;break}return t.next=4,o(a.userId,c.params.id);case 4:t.next=8;break;case 6:return t.next=8,s(a.userId,c.params.id);case 8:return t.next=10,e.props.getUser(c.params.id).then((function(t){e.setState({pageUser:t.payload.user})}));case 10:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.goToFollowing=function(){e.props.history.push("/followings")},e.goToFollowers=function(){e.props.history.push("/followers")},e.state={name:"",loading:!0,pageUser:{}},e}return Object(j.a)(n,[{key:"render",value:function(){var e=this,t=this.state,n=t.loading,a=t.pageUser,s=this.props,o=s.signedInUser,c=s.match,i=this.props.posts.filter((function(e){return e.authorId===c.params.id})).length;return n?Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)(ee,{}),Object(r.jsx)(Me,{})]}):Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)(Me,{}),Object(r.jsx)("div",{style:{width:"100%",height:"auto"},children:Object(r.jsxs)("div",{class:"bg-white shadow rounded overflow-hidden",children:[Object(r.jsxs)("div",{class:"px-4 pt-0 pb-4 cover",children:[Object(r.jsxs)("div",{class:"media align-items-end profile-head mb-2",children:[Object(r.jsxs)("div",{class:"profile mr-3",children:[Object(r.jsx)("img",{src:"https://robohash.org/".concat(a.email),alt:"...",width:"130",class:"rounded mb-2 img-thumbnail"}),o.userId!==c.params.id&&Object(r.jsx)("button",{onClick:function(){return e.handleFollow(a.followers.includes(o.userId))},class:"btn btn-outline-dark btn-sm btn-block",style:{color:"white"},children:a.followers.includes(o.userId)?"Unfollow":"Follow"})]}),Object(r.jsxs)("div",{class:"media-body mb-5 text-white",children:[Object(r.jsx)("h4",{class:"mt-0 mb-0",children:a.name}),Object(r.jsxs)("p",{class:"small mb-4",children:[" ",Object(r.jsx)("i",{class:"fas fa-map-marker-alt "}),a.email]})]})]}),Object(r.jsx)("hr",{style:{background:"white",width:"45%",marginRight:"0"}}),Object(r.jsx)("div",{class:"d-flex justify-content-end text-center",children:Object(r.jsxs)("ul",{class:"list-inline",style:{color:"white"},children:[Object(r.jsxs)("li",{class:"list-inline-item mr-4",children:[Object(r.jsx)("h2",{class:"font-weight-bold d-block",children:i}),Object(r.jsxs)("small",{class:"text-muted",children:[" ",Object(r.jsx)("i",{class:"fas fa-image "}),"Posts"]})]}),Object(r.jsxs)("li",{class:"list-inline-item mr-4 white",onClick:o.userId===c.params.id?this.goToFollowers:null,style:{cursor:o.userId===c.params.id?"pointer":""},children:[Object(r.jsx)("h2",{class:"font-weight-bold d-block",children:a.followers.length}),Object(r.jsxs)("small",{class:"text-muted",children:[" ",Object(r.jsx)("i",{class:"fas fa-user "}),"Followers"]})]}),Object(r.jsxs)("li",{class:"list-inline-item white",onClick:o.userId===c.params.id?this.goToFollowing:null,style:{cursor:o.userId===c.params.id?"pointer":""},children:[Object(r.jsx)("h2",{class:"font-weight-bold d-block",children:a.following.length}),Object(r.jsxs)("small",{class:"text-muted",children:[" ",Object(r.jsx)("i",{class:"fas fa-user"}),"Following"]})]})]})})]}),o.userId===c.params.id&&Object(r.jsx)(Re,{showMyPosts:!0})]})})]})}}]),n}(a.Component)),$e=Object(b.b)((function(e){return{signedInUser:e.authReducer.user,posts:e.postReducer.posts}}),(function(e){return{getUser:function(t){return e(te(t))},followUser:function(t,n){return e(ne(t,n))},unFollowUser:function(t,n){return e(re(t,n))},getFollowers:function(t){return e(ae(t))},getFollowing:function(t){return e(se(t))}}}))(Ye),Xe=n(201),Ze=n(163),et=n(214),tt=n(215),nt=function(e){Object(h.a)(n,e);var t=Object(f.a)(n);function n(){var e;Object(p.a)(this,n);for(var r=arguments.length,a=new Array(r),s=0;s<r;s++)a[s]=arguments[s];return(e=t.call.apply(t,[this].concat(a))).state={user:{}},e.componentDidMount=function(){var t=e.props,n=t.id;(0,t.getUser)(n).then((function(t){e.setState({user:t.payload.user})}))},e}return Object(j.a)(n,[{key:"render",value:function(){var e=this.state.user;return Object(r.jsx)(i.b,{to:"/profile/".concat(e._id),style:{color:"inherit"},children:Object(r.jsxs)(Ze.a,{style:{borderLeft:"1px solid green",marginBottom:"4px"},children:[Object(r.jsx)(et.a,{children:Object(r.jsx)(de.a,{src:"https://robohash.org/".concat(e.email),style:{marginBottom:"12px"}})}),Object(r.jsx)(tt.a,{primary:e.name})]})})}}]),n}(a.Component),rt=function(e){Object(h.a)(n,e);var t=Object(f.a)(n);function n(){var e;return Object(p.a)(this,n),(e=t.call(this)).handleChange=function(t){e.setState(Object(M.a)({},t.target.name,t.target.value))},e.handleSubmit=function(t){t.preventDefault(),e.props.createpost(e.state.postText,e.props.user),e.setState({postText:""})},e.componentDidMount=Object(Q.a)(K.a.mark((function t(){return K.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.props.getUser(e.props.signedInUser.userId).then((function(t){e.setState({followers:t.payload.user.followers})}));case 2:case"end":return t.stop()}}),t)}))),e.state={postText:"",followers:[]},e}return Object(j.a)(n,[{key:"render",value:function(){var e=this.state.followers,t=this.props,n=t.classes,a=(t.user,t.getUser);return Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)(Me,{}),Object(r.jsxs)(Je.a,{item:!0,xs:12,md:6,className:n.grid,children:[Object(r.jsx)(le.a,{variant:"h6",className:n.title,children:"My Followers"}),Object(r.jsx)(Xe.a,{dense:!1,children:e.map((function(e){return Object(r.jsx)(nt,{getUser:a,id:e})}))})]})]})}}]),n}(a.Component),at=G()(Object(z.a)((function(e){return{root:{flexGrow:1,maxWidth:752},demo:{backgroundColor:e.palette.background.paper},title:{margin:e.spacing(4,0,2)},grid:{marginLeft:"10%"}}})),Object(b.b)((function(e){return{signedInUser:e.authReducer.user,user:e.userReducer}}),(function(e){return{getUser:function(t){return e(te(t))},getFollowers:function(t){return e(ae(t))}}})))(rt),st=n(216),ot=function(e){Object(h.a)(n,e);var t=Object(f.a)(n);function n(){var e;Object(p.a)(this,n);for(var r=arguments.length,a=new Array(r),s=0;s<r;s++)a[s]=arguments[s];return(e=t.call.apply(t,[this].concat(a))).state={user:{}},e.componentDidMount=function(){var t=e.props,n=t.id;(0,t.getUser)(n).then((function(t){e.setState({user:t.payload.user})}))},e.Unfollow=Object(Q.a)(K.a.mark((function t(){var n,r,a,s;return K.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.props,r=n.id,a=n.signedInUserId,s=n.UnfollowUser,t.next=3,s(a,r);case 3:e.props.reload();case 4:case"end":return t.stop()}}),t)}))),e}return Object(j.a)(n,[{key:"render",value:function(){var e=this.state.user;return Object(r.jsxs)(Ze.a,{style:{borderLeft:"1px solid green",marginBottom:"4px"},children:[Object(r.jsxs)(i.b,{to:"/profile/".concat(e._id),style:{color:"inherit",display:"flex"},children:[Object(r.jsx)(et.a,{children:Object(r.jsx)(de.a,{src:"https://robohash.org/".concat(e.email),style:{marginBottom:"12px"}})}),Object(r.jsx)(tt.a,{primary:e.name})]}),Object(r.jsx)(st.a,{children:Object(r.jsx)(H.a,{variant:"outlined",color:"primary",onClick:this.Unfollow,children:"Unfollow"})})]})}}]),n}(a.Component),ct=function(e){Object(h.a)(n,e);var t=Object(f.a)(n);function n(){var e;return Object(p.a)(this,n),(e=t.call(this)).handleChange=function(t){e.setState(Object(M.a)({},t.target.name,t.target.value))},e.handleSubmit=function(t){t.preventDefault(),e.props.createpost(e.state.postText,e.props.user),e.setState({postText:""})},e.componentDidMount=Object(Q.a)(K.a.mark((function t(){return K.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.props.getUser(e.props.signedInUser.userId).then((function(t){e.setState({followings:t.payload.user.following})}));case 2:case"end":return t.stop()}}),t)}))),e.state={postText:"",followings:[]},e}return Object(j.a)(n,[{key:"render",value:function(){var e=this,t=this.state.followings,n=this.props,a=n.classes,s=n.getUser,o=n.UnfollowUser;return Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)(Me,{}),Object(r.jsxs)(Je.a,{item:!0,xs:12,md:6,className:a.grid,children:[Object(r.jsx)(le.a,{variant:"h6",className:a.title,children:"My Followings"}),Object(r.jsx)(Xe.a,{dense:!1,children:t.map((function(t){return Object(r.jsx)(ot,{id:t,getUser:s,signedInUserId:e.props.signedInUser.userId,UnfollowUser:o,reload:e.componentDidMount})}))})]})]})}}]),n}(a.Component),it=G()(Object(z.a)((function(e){return{root:{flexGrow:1,maxWidth:752},demo:{backgroundColor:e.palette.background.paper},title:{margin:e.spacing(4,0,2)},grid:{marginLeft:"10%"}}})),Object(b.b)((function(e){return{signedInUser:e.authReducer.user,user:e.userReducer}}),(function(e){return{getUser:function(t){return e(te(t))},getFollowers:function(t){return e(ae(t))},UnfollowUser:function(t,n){return e(re(t,n))}}})))(ct);Object(l.initAnalytics)("UA-126201794-1");var lt=Object(d.a)(),ut=Object(c.f)(u()((function(){return Object(r.jsxs)(c.c,{children:[Object(r.jsx)(c.a,{exact:!0,path:"/",component:Ge}),Object(r.jsx)(c.a,{path:"/register",component:He}),Object(r.jsx)(c.a,{path:"/login",component:qe}),Object(r.jsx)(c.a,{path:"/discover",component:Qe}),Object(r.jsx)(c.a,{path:"/profile/:id",component:$e}),Object(r.jsx)(c.a,{path:"/followers",component:at}),Object(r.jsx)(c.a,{path:"/followings",component:it}),Object(r.jsx)(c.a,{component:Ge})]})}))),dt=function(){return Object(r.jsx)(i.a,{basename:"",history:lt,children:Object(r.jsx)(ut,{})})},pt=function(){return Object(r.jsx)(dt,{})},jt=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function ht(e){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var t=e.installing;t.onstatechange=function(){"installed"===t.state&&(navigator.serviceWorker.controller?console.log("New content is available; please refresh."):console.log("Content is cached for offline use."))}}})).catch((function(e){console.error("Error during service worker registration:",e)}))}var ft=n(103),bt=n(104),mt=n(13),Ot=n(105),gt=n.n(Ot),xt={isAuthenticated:!1,user:{}},vt={},wt=n(78),yt={posts:[]},kt={allUsers:[],followers:[],following:[],currUser:{}},Ct=Object(Ne.combineReducers)({authReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:xt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case R:return Object(mt.a)(Object(mt.a)({},e),{},{isAuthenticated:!gt()(t.payload),user:t.payload});default:return e}},errorReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:vt,t=arguments.length>1?arguments[1]:void 0;return t.type===T||t.type===S?t.payload:e},postReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:yt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case C:return Object(mt.a)(Object(mt.a)({},e),{},{posts:t.payload});case y:return Object(mt.a)(Object(mt.a)({},e),{},{posts:[{_id:t.payload._id,author:t.payload.author,authorId:t.payload.authorId,comments:[],likers:t.payload.likers,likesCount:t.payload.likesCount,text:t.payload.text,timestamp:t.payload.timestamp}].concat(Object(wt.a)(e.posts))});case k:return Object(mt.a)(Object(mt.a)({},e),{},{posts:e.posts.filter((function(e){return e._id!==t.id}))});case U:return Object(mt.a)(Object(mt.a)({},e),{},{posts:e.posts.map((function(e){return e._id===t.payload._id?Object(mt.a)(Object(mt.a)({},e),{},{likers:t.payload.likers,likesCount:t.payload.likesCount}):e}))});case I:return Object(mt.a)(Object(mt.a)({},e),{},{posts:e.posts.map((function(e){return e._id==t.payload._id?Object(mt.a)(Object(mt.a)({},e),{},{comments:[].concat(Object(wt.a)(e.comments),[{_id:t.payload.comments[t.payload.comments.length-1]._id,commenterId:t.commenterId,text:t.text}])}):e}))});default:return e}},userReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:kt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case N:return Object(mt.a)(Object(mt.a)({},e),{},{followers:t.payload.user.followers});case F:return Object(mt.a)(Object(mt.a)({},e),{},{following:t.payload.user.following});case L:return Object(mt.a)(Object(mt.a)({},e),{},{currUser:t.payload});case _:return Object(mt.a)(Object(mt.a)({},e),{},{allUsers:t.payload});case D:return Object(mt.a)(Object(mt.a)({},e),{},{allUsers:e.allUsers.map((function(e){return e._id===t.payload._id?Object(mt.a)(Object(mt.a)({},e),{},{followers:t.payload.followers}):e}))});case E:return Object(mt.a)(Object(mt.a)({},e),{},{following:t.payload.following});default:return e}}}),Ut=Object(Ne.createStore)(Ct,Object(ft.composeWithDevTools)(Object(Ne.applyMiddleware)(bt.a)));if(localStorage.jwtToken){x(localStorage.jwtToken);var It=Object(g.a)(localStorage.jwtToken);Ut.dispatch(P(It));var St=Date.now()/1e3;It.exp<St&&(Ut.dispatch(A()),window.location.href="/login")}o.a.render(Object(r.jsx)(b.a,{store:Ut,children:Object(r.jsx)(pt,{})}),document.getElementById("root")),function(){if("serviceWorker"in navigator){if(new URL("",window.location).origin!==window.location.origin)return;window.addEventListener("load",(function(){var e="".concat("","/service-worker.js");jt?(!function(e){fetch(e).then((function(t){404===t.status||-1===t.headers.get("content-type").indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):ht(e)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://goo.gl/SC7cgQ")}))):ht(e)}))}}()},97:function(e,t,n){}},[[161,1,2]]]);
//# sourceMappingURL=main.8210d17f.chunk.js.map